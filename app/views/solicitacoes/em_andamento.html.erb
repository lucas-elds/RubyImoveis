<h1>Solicitações de visita</h1>

<div class="cards-container" style="display: flex; flex-wrap: wrap; gap: 20px;">
  <% @solicitacoes.each do |solicitacao| %>
    <div class="card" style="border: 1px solid #ccc; border-radius: 8px; padding: 16px; width: 300px;">
      <h3>Imóvel: <%= solicitacao.imovel.tipo %> em <%= solicitacao.imovel.cidade %></h3>
      <p><strong>Bairro:</strong> <%= solicitacao.imovel.bairro %></p>
      <p><strong>Cliente:</strong> <%= solicitacao.cliente.nome %></p>
      <p><strong>Data de Visita/Proposta:</strong> <%= solicitacao.data_visita_proposta %></p>
      <p><strong>Preço Proposto:</strong> <%= number_to_currency(solicitacao.preco_proposto) %></p>
      <p><strong>Status:</strong> <%= solicitacao.status %></p>

      <div style="margin-top: 8px; display: flex; gap: 8px; flex-wrap: wrap;">
        <% if solicitacao.status == "Em Aberto" %>
          <%= button_to "Aceitar", aceitar_solicitacao_path(solicitacao), method: :patch, class: "btn btn-success" %>
          <%= button_to "Rejeitar", rejeitar_solicitacao_path(solicitacao), method: :patch, class: "btn btn-danger" %>
        <% elsif solicitacao.status == "Aceita" %>
          <%= button_to "Confirmar venda", concluir_solicitacao_path(solicitacao), method: :patch, class: "btn btn-primary" %>
        <% elsif ["Rejeitada", "Concluída"].include?(solicitacao.status) %>
          <%= button_to "Excluir", solicitacao_path(solicitacao), method: :delete, data: { confirm: "Tem certeza que deseja excluir?" }, class: "btn btn-danger" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
